{"ast":null,"code":"var content = '/login/';\nvar url = 'http://localhost:3001';\n\nfunction loginUser(username, password) {\n  console.log(\"let's login user\");\n  var data = new FormData();\n  var headers = {}; //\n\n  data.append('username', username);\n  data.append('password', password);\n  h.Accept = 'application/json'; //if you expect JSON response\n\n  return fetch('/api/login', {\n    method: 'POST',\n    headers: headers,\n    body: data\n  }).then(handleErrors).then(function (res) {\n    return res.json();\n  });\n}\n\nexport function login(username, password) {\n  return function (dispatch) {\n    dispatch(loginBegin());\n    return loginUser(username, password).then(function (json) {\n      console.log(\"success!\", json);\n      dispatch(loginSuccess(json));\n      return json;\n    }).catch(function (error) {\n      return dispatch(loginFailure(error));\n    });\n  };\n} // Handle HTTP errors since fetch won't.\n\nfunction handleErrors(response) {\n  if (!response.ok) {\n    throw Error(response.statusText);\n  }\n\n  return response;\n}\n\nexport var LOGIN_BEGIN = \"LOGIN_BEGIN\";\nexport var LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\nexport var LOGIN_FAILURE = \"LOGIN_FAILURE\";\nexport var loginBegin = function loginBegin() {\n  return {\n    type: LOGIN_BEGIN\n  };\n};\nexport var loginSuccess = function loginSuccess(user) {\n  return {\n    type: LOGIN_SUCCESS,\n    payload: \"success\"\n  };\n};\nexport var loginFailure = function loginFailure(error) {\n  return {\n    type: LOGIN_FAILURE,\n    payload: {\n      error: error\n    }\n  };\n};","map":{"version":3,"sources":["/home/dagaubs/Cours/TPs/GLITAA/GLITAA_front/src/actions/LoginActions.js"],"names":["content","url","loginUser","username","password","console","log","data","FormData","headers","append","h","Accept","fetch","method","body","then","handleErrors","res","json","login","dispatch","loginBegin","loginSuccess","catch","error","loginFailure","response","ok","Error","statusText","LOGIN_BEGIN","LOGIN_SUCCESS","LOGIN_FAILURE","type","user","payload"],"mappings":"AAAA,IAAIA,OAAO,GAAG,SAAd;AACA,IAAIC,GAAG,GAAG,uBAAV;;AACA,SAASC,SAAT,CAAmBC,QAAnB,EAA6BC,QAA7B,EAAuC;AACnCC,EAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA,MAAIC,IAAI,GAAG,IAAIC,QAAJ,EAAX;AACA,MAAIC,OAAO,GAAG,EAAd,CAHmC,CAGlB;;AACjBF,EAAAA,IAAI,CAACG,MAAL,CAAY,UAAZ,EAAwBP,QAAxB;AACAI,EAAAA,IAAI,CAACG,MAAL,CAAY,UAAZ,EAAwBN,QAAxB;AACAO,EAAAA,CAAC,CAACC,MAAF,GAAW,kBAAX,CANmC,CAMJ;;AAC/B,SAAOC,KAAK,CAAC,YAAD,EAAe;AACzBC,IAAAA,MAAM,EAAE,MADiB;AAEzBL,IAAAA,OAAO,EAAEA,OAFgB;AAGzBM,IAAAA,IAAI,EAAER;AAHmB,GAAf,CAAL,CAKJS,IALI,CAKCC,YALD,EAMJD,IANI,CAMC,UAAAE,GAAG;AAAA,WAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,GANJ,CAAP;AAOD;;AAGH,OAAO,SAASC,KAAT,CAAejB,QAAf,EAAyBC,QAAzB,EAAmC;AACtC,SAAO,UAAAiB,QAAQ,EAAI;AACjBA,IAAAA,QAAQ,CAACC,UAAU,EAAX,CAAR;AACA,WAAOpB,SAAS,CAACC,QAAD,EAAWC,QAAX,CAAT,CACJY,IADI,CACC,UAAAG,IAAI,EAAI;AACZd,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAuBa,IAAvB;AACAE,MAAAA,QAAQ,CAACE,YAAY,CAACJ,IAAD,CAAb,CAAR;AACA,aAAOA,IAAP;AACD,KALI,EAMJK,KANI,CAME,UAAAC,KAAK;AAAA,aACVJ,QAAQ,CAACK,YAAY,CAACD,KAAD,CAAb,CADE;AAAA,KANP,CAAP;AASD,GAXD;AAYD,C,CAED;;AACA,SAASR,YAAT,CAAsBU,QAAtB,EAAgC;AAC9B,MAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB;AAChB,UAAMC,KAAK,CAACF,QAAQ,CAACG,UAAV,CAAX;AACD;;AACD,SAAOH,QAAP;AACD;;AAED,OAAO,IAAMI,WAAW,GAAG,aAApB;AACP,OAAO,IAAMC,aAAa,GAAG,eAAtB;AACP,OAAO,IAAMC,aAAa,GAAG,eAAtB;AAEP,OAAO,IAAMX,UAAU,GAAG,SAAbA,UAAa;AAAA,SAAO;AAC/BY,IAAAA,IAAI,EAAEH;AADyB,GAAP;AAAA,CAAnB;AAIP,OAAO,IAAMR,YAAY,GAAG,SAAfA,YAAe,CAAAY,IAAI;AAAA,SAAK;AACnCD,IAAAA,IAAI,EAAEF,aAD6B;AAEnCI,IAAAA,OAAO,EAAE;AAF0B,GAAL;AAAA,CAAzB;AAKP,OAAO,IAAMV,YAAY,GAAG,SAAfA,YAAe,CAAAD,KAAK;AAAA,SAAK;AACpCS,IAAAA,IAAI,EAAED,aAD8B;AAEpCG,IAAAA,OAAO,EAAE;AAAEX,MAAAA,KAAK,EAALA;AAAF;AAF2B,GAAL;AAAA,CAA1B","sourcesContent":["var content = '/login/';\nvar url = 'http://localhost:3001';\nfunction loginUser(username, password) {\n    console.log(\"let's login user\");\n    let data = new FormData();\n    var headers = {} //\n    data.append('username', username);\n    data.append('password', password);\n    h.Accept = 'application/json'; //if you expect JSON response\n    return fetch('/api/login', {\n      method: 'POST',\n      headers: headers,\n      body: data\n    })\n      .then(handleErrors)\n      .then(res => res.json());\n  }\n  \n\nexport function login(username, password) {\n    return dispatch => {\n      dispatch(loginBegin());\n      return loginUser(username, password)\n        .then(json => {\n          console.log(\"success!\",json);\n          dispatch(loginSuccess(json));\n          return json;\n        })\n        .catch(error =>\n          dispatch(loginFailure(error))\n        );\n    };\n  }\n  \n  // Handle HTTP errors since fetch won't.\n  function handleErrors(response) {\n    if (!response.ok) {\n      throw Error(response.statusText);\n    }\n    return response;\n  }\n  \n  export const LOGIN_BEGIN = \"LOGIN_BEGIN\";\n  export const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\n  export const LOGIN_FAILURE = \"LOGIN_FAILURE\";\n  \n  export const loginBegin = () => ({\n    type: LOGIN_BEGIN\n  });\n  \n  export const loginSuccess = user => ({\n    type: LOGIN_SUCCESS,\n    payload: \"success\"\n  });\n  \n  export const loginFailure = error => ({\n    type: LOGIN_FAILURE,\n    payload: { error }\n  });"]},"metadata":{},"sourceType":"module"}